# .github/workflows/test-secrets.yml
name: Test Secrets Configuration

on: [workflow_dispatch]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - name: Test Airtable Secrets
      env:
        AIRTABLE_TOKEN: ${{ secrets.AIRTABLE_TOKEN }}
        AIRTABLE_BASE_ID: ${{ secrets.AIRTABLE_BASE_ID }}
      run: |
        echo "üß™ TEST DE CONFIGURACI√ìN DE SECRETOS"
        echo "======================================"
        
        # Test AIRTABLE_TOKEN
        if [ -z "${AIRTABLE_TOKEN}" ]; then
          echo "‚ùå AIRTABLE_TOKEN: NO CONFIGURADO"
        else
          echo "‚úÖ AIRTABLE_TOKEN: CONFIGURADO (${#AIRTABLE_TOKEN} caracteres)"
          echo "   Primeros 5: ${AIRTABLE_TOKEN:0:5}..."
        fi
        
        # Test AIRTABLE_BASE_ID
        if [ -z "${AIRTABLE_BASE_ID}" ]; then
          echo "‚ùå AIRTABLE_BASE_ID: NO CONFIGURADO"
        else
          echo "‚úÖ AIRTABLE_BASE_ID: CONFIGURADO"
          echo "   Valor: ${AIRTABLE_BASE_ID}"
        fi
        
        # Test GITHUB_TOKEN (autom√°tico)
        if [ -z "${{ secrets.GITHUB_TOKEN }}" ]; then
          echo "‚ö†Ô∏è  GITHUB_TOKEN: NO VISIBLE (pero existe internamente)"
        else
          echo "‚úÖ GITHUB_TOKEN: DISPONIBLE"
        fi
        
        echo ""
        echo "üìã RESUMEN:"
        if [ -n "${AIRTABLE_TOKEN}" ] && [ -n "${AIRTABLE_BASE_ID}" ]; then
          echo "üéâ TODOS LOS SECRETOS EST√ÅN CONFIGURADOS"
          exit 0
        else
          echo "‚ùå FALTAN SECRETOS POR CONFIGURAR"
          exit 1
        fi
